# Flyweight Pattern

## 1. Flywieght 패턴

### 1.1 개념

- 어떤 클래스의 인스턴스 한개만 가지고 여러개의 가상 인스턴스를 제공하고 싶을 때
- 인스턴스를 공유시고 재활용 → new 연산자로 객체 생성해서 생기는 메모리 낭비 줄임


- 각 구성요소 역할
    - Interface 로 공유에 사용될 클래스 선언
    - 이걸 구현한 ConcreteFlyweight에서 내용을 정의하고 실제로 공유할 객체가 됨
    - FlyweightFactory는 인스턴스를 생성 또는 공유하는 역할

### 1.2 왜 사용?

- 객체 인스턴스 개수를 줄여 매무리 절약 가능(너무 많이 생성 X)
- 공유를 통해 대량의 객체의 상태를 한 곳에 집중시켜놓을 수 있음(Pool)

### 1.3 단점

- 특정 인스턴스만 다른 인스턴스처럼 동작하도록 하는 것이 불가능
- 객체의 값을 변경하면 공유받은 가상 객체를 사용하는 곳에 영향을 줄 수 있음

### 1.4 결론

- 반복해서 생성하고 사용해야하는 객체나 여러 클래스에서 공유되어서 쓰이는 객체는 Flywieght 패턴 쓰자
- 클래스마다 인스턴스 수정해서 써야하거나, 변형할 일이 있다면 new 연산자로 만들어서 쓰자

### 1.5 관련 패턴

- Proxy 패턴: Flywieght 패턴에서 인스턴스 생성에 시간이 걸리는 경우 인스턴스 공유에 따라 처리속도 향ㅅ아
- Composite 패턴: Flywieght 패턴을 사용해서 composite 패턴의 leaf 역할을 공유시킬 수 있는 경우가 있음
- Singleton 패턴: FlywieghtFactory를 Singleton으로 구현하는 경우가 있음

[참고][https://lee1535.tistory.com/106](https://lee1535.tistory.com/106)